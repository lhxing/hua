<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>注册</title>
    <style type="text/css" media="screen">
        .notice{
            color:red;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="css/frontindex.css">
       
</head>
<body>
    <!-- top 开始 -->

    <!-- 右侧列表 -->
    <div class="big_right">
        <div class="right_gouwu">
        </div>
        <div class="right_d1"><a href="#">¤</a>
            <div class="d1_erji1">
                <h2>我的资产</h2>
            </div>
        </div>
        <div class="right_d2">
            <a href="#">♡</a>
            <div class="d1_erji1">
                <h2>我的收藏</h2>
            </div>
        </div>
        <div class="right_d3">
            <a href="#">☺</a>
            <div class="d1_erji1">
                <h2>我喜欢的</h2>
            </div>
        </div>
        <div class="right_d4">
            <a href="#">۞</a>
            <div class="d1_erji1">
                <h2>我要充值</h2>
            </div>
        </div>
        <div class="right_d5">
            <a href="#">✉</a>
            <div class="d1_erji1">
                <h2>用户反馈</h2>
            </div>
        </div>
        <div class="right_d6">
            <a href="#">㊤</a>
            <div class="d1_erji1">
                <h2>返回顶部</h2>
            </div>
        </div>
    </div>
    <header>

        <div class="weizhi" id="wenzi">
            <span>请您登录</span>
            <div class="shou">☟</div>
            <div class="erji1">
                <div class="erji1_tu">
                    <img src="images/front/20.jpg">
                </div>
                <div class="hai">hai!@我是唯品会
                </div>
                <form action="">
                    <input type="text" class="i1" name="username" placeholder="请输入您的账号">
                    <input type="text" class="i3" name="password" placeholder="请输入您的密码">
                    <input type="button"
                           class="i2" name="" value="登录">
                </form>
            </div>
        </div>
        <!-- 导航 -->
        <div class="daohang">
            <ul>
                <li class="l1"><a href="#" id="register">注册&nbsp;&nbsp;/</a></li>
                <li class="l2"><a href="#"><img src="images/front/gift.gif"> 签到有礼</a>
                    <div class="erji2">
                        <div class="erji2_1">
                            <img src="images/front/days.png">
                        </div>

                        <div class="qiandao">
                            <a href="#">
                                每天签到送惊喜，连续签到更享优惠礼品
                            </a>
                        </div>
                        <form>
                            <input type="submit" name="" value="签到">
                        </form>
                    </div>
                </li>
                <li class="l3"><a href="#">我的订单&nbsp;&nbsp; /</a></li>
                <li class="l4"><a href="#">我的特卖▼</a>
                    <div class="erji3">
                        <div class="erji3_div1">
                            <a href="#">品牌收藏(0)</a></div>
                        <div class="erji3_div2"><a href="#">商品收藏(0)</a></div>
                        <div class="erji3_div3"><a href="#">我的足迹(0)</a></div>

                    </div>
                </li>
                <li class="l5"><a href="#">会员俱乐部▼</a>
                    <div class="erji4">
                        <div class="erji4_div1">
                            <a href="#">俱乐部首页</a></div>
                        <div class="erji4_div2"><a href="#">唯品会兑换</a></div>
                        <div class="erji4_div3"><a href="#">免费抽大奖</a></div>
                    </div>
                </li>
                <li class="l6"><a href="#">客户服务&nbsp;&nbsp;▼</a>
                    <div class="erji5">
                        <div class="erji5_div1">
                            <a href="#">联系客服</a></div>
                        <div class="erji5_div2"><a href="#">帮助中心</a></div>
                        <div class="erji5_div3"><a href="#">服务中心</a></div>
                        <div class="erji5_div4"><a href="#">知识产权</a></div>
                    </div>
                </li>
                <li class="l7"><a href="#">手机版&nbsp;&nbsp;&nbsp;&nbsp;<span> ☎</span></a>
                    <div class="erji6">
                        <img src="images/front/ercode.jpg">
                    </div>
                </li>
                <li class="l8"><a href="#">更多&nbsp;&nbsp;▼
                    <div class="erji7">
                        <h2>合作专区</h2>
                        <div class="erji7_div1"><a href="#">联名卡申请</a></div>
                        <div class="erji7_div1"><a href="#">唯品卡</a></div>
                        <div class="erji7_div1"><a href="#">支付专区</a></div>
                        <hr>
                        <h3>关于我们</h3>
                        <div class="erji7_div1"><a href="#">联名卡申请</a></div>
                        <div class="erji7_div1"><a href="#">唯品卡</a></div>
                        <div class="erji7_div1"><a href="#">支付专区</a></div>
                    </div>
                </a></li>
            </ul>
        </div>
    </header>
    <section>
        <div classs="section_header">
            <div class="header_div1">
                <img src="images/front/3.png">
            </div>
            <div class="header_div2">
                <img src="images/front/2.png" class="c-service-img">
            </div>
            <!-- 搜索框 -->
            <div class="c-search-form">
                <input class="c-search-input "  placeholder="大家都在搜：瑞士双肩包"   type="text">
                <a class="c-search-button" href="###">
                    <span class="c-search-icon"></span>
                </a>
            </div>
            <!-- 购物袋 -->
            <div  class="head-cart">
                <a href="jsp/front/shopcart.jsp ">
                    <span class="ico-bag"></span>
                    <span class="mycarttext-default">购物袋</span>
                    <span class="productItems">0</span>
                </a>
            </div>
        </div>
        <!-- 分类 -->
        <div class="section_headerder">
            <ul>
                <li><a href="<%=path%>/IndexAction">首页</a></li>
                <li><a href="#">女装</a></li>
                <li><a href="#">母婴</a></li>
                <li><a href="#">美妆</a></li>
                <li><a href="#">国际</a></li>
                <li><a href="#">男装</a></li>
                <li><a href="#">居家</a></li>
                <li><a href="#">鞋包</a></li>
                <li><a href="#">运动</a></li>
            </ul>
        </div>

    </section>

    <!-- top结束 -->

    <!-- 注册 -->
    <div class="register">
        <div class="form">
            <div class="title">会员注册</div>
            <hr/>
            <div class="content">
                <span><label>*</label>用户名:</span>
                <input type="text" name="username" id="username"><div class="notice" id="usernameNotice"></div>
            </div>
            <div class="content">
                <span><label>*</label>密码:</span>
                <input type="password" name="password" id="password"><div class="notice" id="passwordNotice"></div>
            </div>
            <div class="content">
                <span><label>*</label>确认密码:</span>
                <input type="password" name="" id="repeatPassword"><div class="notice" id="repeatPasswordNotice"></div>
            </div>
            <div class="content">
                <span><label>*</label>E-mail:</span>
                <input type="text" name="email" id="email"><div class="notice" id="emailNotice"></div>
            </div>
            <div class="content">
                <span>姓名:</span>
                <input type="text" name="name" id="name">
                <div class="notice" id="nameNotice"></div>
            </div>
            <div class="content">
                <span>电话:</span>
                <input type="text" name="phone" id="phone"><div class="notice" id="phoneNotice"></div>
            </div>
            <div class="content">
                <span>地址:</span>
                <input type="text" name="addr" id="addr">
                <div class="notice" id="addrNotice"></div>
            </div>
            <div class="content">
                <span><label>*</label>验证码:</span>
                <input type="text" name="inputCode" style="width: 120px" id="inputCode"><span class="code" id="imgCode" onclick="g()"></span>
                <div class="notice" id="codeNotice"></div>
            </div>
            <button id="ok">立即注册</button>
        </div>
    </div>
<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script type="text/javascript">
   
    $(function () {
    Ic();
    $(".notice").css("color","red");
    function checkUnsername() {
        var val = $("#username").val();
        var reg = /^[A-Za-z0]\w{5,17}$/;
        if (reg.test(val)) {
            return true;
        }else{
            return false;
        }
    }
    $("#username").blur(function () {
        if(checkUnsername()){
            $("#usernameNotice").text("");
        }else{
            $("#usernameNotice").html("以字母开头，长度6~18，只能包含字符、数字和下划线");
        }
    });
    function checkPassword() {
        var val = $("#password").val();
        var reg = /^[A-Za-z0]\w{5,17}$/;
        if (reg.test(val)) {
            return true;
        }else{
            return false;
        }
    }
    $("#password").blur(function () {
        if(checkPassword()){
            $("#passwordNotice").text("");
        }else{
            $("#passwordNotice").html("以字母开头，长度6~18，只能包含字符、数字和下划线");
        }
    });
    function checkRepassword() {
        var val = $("#repeatPassword").val();
        if (val==$("#password").val()) {
            return true;
        }else{
            return false;
        }
    }
    $("#repeatPassword").blur(function () {
        if(checkRepassword()){
            $("#repeatPasswordNotice").text("");
        }else{
            $("#repeatPasswordNotice").html("两次密码不一致");
        }
    });
    function checkEmail() {
        var val = $("#email").val();
        var reg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
        if (reg.test(val)) {
            return true;
        }else{
            return false;
        }
    }
    $("#email").blur(function () {
        if(checkEmail()){
            $("#emailNotice").text("");
        }else{
            $("#emailNotice").html("邮箱格式不正确");
        }
    });
    function checkTel() {
        var val = $("#phone").val();
        var reg = /^1[34578]\d{9}$/;
        if (reg.test(val)) {
            return true;
        }else{
            return false;
        }
    }
    $("#phone").blur(function () {
        if(checkTel()){
            $("#phoneNotice").text("");
        }else{
            $("#phoneNotice").html("电话格式不正确");
        }
    });
    function checkIc() {
        var val = $("#inputCode").val();
        if(val.length<=0){
            $("#codeNotice").html("请输入验证码");
          return false;
        }else if(val==$("#imgCode").text()){
            $("#codeNotice").html($("#imgCode").text());
          return true;
        }else{
            $("#codeNotice").html("验证码输入有误");
          return false;
        }
    }
    $("#inputCode").blur(function () {checkIc();});
    $("#imgCode").click(function () {Ic();});
    $("#ok").click(function () {

        if (checkUnsername()&&checkPassword()&&checkRepassword()&&checkEmail()&&checkTel()&&checkIc()) {
            var info = {};
            info.username = $("#username").val();
            info.password = $("#password").val();
            info.email = $("#email").val();
            info.phone = $("#phone").val();
            info.addr = $("#addr").val();
            info.code=$("#inputCode").val();
            $.ajax({
                type:"GET",
                url:"userServlet",
                dataType:"json",
                data:info,
                jsonpCallback:"success_jsonpCallback",
                success:function(data){
                    if (data.flag) {
                        // flag返回true或false
                        window.location = "index.html";
                    }else{
                        alert("注册失败!");
                    }
                }
            });


        }else{
            $("#username").blur();
            $("#password").blur();
            $("#repeatPassword").blur();
            $("#email").blur();
            $("#phone").blur();
            alert("请完善个人信息!");
        }
    });

 
    $(document).keydown(function(event){
        
        if(event.keyCode==13) {

                $(".i2").click();
            }
             
            
        
    });


    $(document).keydown(function(event){
        if(event.keyCode==13) {
            $("#ok").click();
        }
    });
    $(".i2").click(function () {
        var username = $("form input[name='username']").val();
        var password = $("form input[name='password']").val();
        $.get("LoginServlet",{username:username,password:password}
            ,function (data) {
            console.log(data)
                for(var i in data){
                    if(data!=null){
                        $("#wenzi").html(data[i].username);
                    }
                    else{
                        alert("用户名或者密码不正确!");
                    }
                }

            },"json")
    });
} );
var code;
function Ic() {
    code="";
    var codeLength=6;
    var selectChar=new Array(1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z');
    for(var i=0;i<codeLength;i++){
        var charIndex=Math.floor(Math.random()*61);
        code += selectChar[charIndex];
    }
    if (code.length != codeLength) {
        Ic();
    }
    $("#imgCode").text(code);
}

</script>
</body>
</html>
